Golden Advisor - Анализатор состояния кожи и подбор рекомендаций

**Golden Advisor** — это веб-приложение, предназначенное для анализа состояния кожи лица по фотографиям. Пользователи могут загружать три фотографии (анфас, левый и правый профиль), после чего система на основе моделей машинного обучения определяет тип кожи, наличие акне, розацеа, комедонов и предоставляет персонализированные рекомендации по уходу.

## Основные возможности

* **Аутентификация через Telegram**: Быстрый и безопасный вход для пользователей Telegram.
* **Загрузка изображений**: Пользователи загружают три фотографии лица для анализа.
* **Анализ кожи**:
    * Определение типа кожи (например, нормальная, сухая, жирная).
    * Выявление наличия акне.
    * Детекция розацеа.
    * Определение наличия комедонов.
* **Персональные рекомендации**: На основе результатов анализа LLM (Large Language Model) генерирует текстовые рекомендации по уходу за кожей.
* **История анализов**: Зарегистрированные пользователи могут просматривать историю своих предыдущих анализов и их результаты.
* **Адаптивный дизайн**: Пользовательский интерфейс адаптирован для различных устройств благодаря Bootstrap 5.

## Технологический стек

* **Бэкенд**:
    * Python
    * Flask (веб-фреймворк)
    * PyTorch (для моделей машинного обучения)
    * Transformers (для работы с LLM, если используется локально или через API)
    * Pillow (PIL) (для обработки изображений)
    * SQLAlchemy (или прямой SQLite для базы данных)
    * dotenv (для управления переменными окружения)
* **Фронтенд**:
    * HTML5
    * CSS3 (с использованием Bootstrap 5)
    * JavaScript (минимальное использование, в основном через Bootstrap компоненты)
* **База данных**: SQLite (`DB.db`)
* **Машинное обучение**:
    * Модели на основе ResNet/EfficientNet (или аналогичные) для классификации изображений (тип кожи, акне, розацеа, комедоны).
    * Предположительно, YandexGPT (Ygpt) и RAG (Retrieval Augmented Generation) для формирования финальных рекомендаций.

## Структура проекта

```
.
├── main.py            # Основной файл Flask приложения (маршруты, логика)
├── back.py            # Модуль с логикой обработки изображений и ML-моделями
├── Ygpt.py            # (Предположительно) Модуль для взаимодействия с YandexGPT
├── RAG.py             # (Предположительно) Модуль для RAG
├── DB.db              # Файл базы данных SQLite
├── .env               # Файл с переменными окружения (необходимо создать)
├── requirements.txt   # Список зависимостей Python (необходимо создать)
├── photos/            # Папка для хранения загруженных пользователями изображений
├── static/
│   └── css/
│       └── style.css  # Пользовательские стили
└── templates/
    ├── base.html          # Базовый шаблон HTML
    ├── index.html         # Главная страница с формой входа через Telegram
    ├── dashboard.html     # Личный кабинет пользователя (загрузка фото, история)
    └── analysis_detail.html # Страница с деталями конкретного анализа
```

## Предварительные требования

* Python 3.9+
* pip (менеджер пакетов Python)
* Зарегистрированный Telegram бот и его токен.

## Установка и запуск

1.  **Клонируйте репозиторий (если он есть):**
    ```bash
    git clone <URL_репозитория>
    cd <название_папки_проекта>
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # для Linux/macOS
    # venv\Scripts\activate   # для Windows
    ```

3.  **Установите зависимости:**
    Создайте файл `requirements.txt` со списком необходимых библиотек (пример ниже) и выполните:
    ```bash
    pip install -r requirements.txt
    ```
    Примерное содержимое `requirements.txt`:
    ```txt
    flask
    python-dotenv
    torch
    torchvision
    Pillow
    transformers 
    scikit-learn
    # Добавьте другие специфичные библиотеки, если они используются (например, для Ygpt, RAG)
    ```

4.  **Настройте переменные окружения:**
    Создайте файл `.env` в корневой директории проекта и добавьте в него следующие переменные:
    ```env
    TELEGRAM_BOT_TOKEN=ВАШ_ТЕЛЕГРАМ_БОТ_ТОКЕН
    TELEGRAM_BOT_USERNAME=ИМЯ_ВАШЕГО_ТЕЛЕГРАМ_БОТА
    FLASK_SECRET_KEY=Сгенерируйте_Случайный_Секретный_Ключ
    ```
    `FLASK_SECRET_KEY` можно сгенерировать, например, так в Python консоли: `import os; os.urandom(24).hex()`.

5.  **Подготовьте модели машинного обучения:**
    Убедитесь, что файлы моделей (`skin_type_model.pth`, `acne_model.pth`, `rosacea.pth`, `comedone_model.pth`) находятся в корневой директории проекта или по путям, указанным в `back.py`.

6.  **Инициализация базы данных (при первом запуске):**
    База данных `DB.db` и папка `photos/` будут созданы автоматически при первом запуске `main.py`, если они отсутствуют.

7.  **Запустите приложение:**
    ```bash
    python main.py
    ```
    Приложение будет доступно по адресу `http://0.0.0.0:5000/` или `http://127.0.0.1:5000/`.

## Дальнейшее развитие (возможные улучшения)

* Более продвинутая система управления пользователями.
* Очередь задач для обработки изображений (например, Celery), если анализ занимает много времени.
* Более детальные и интерактивные отчеты по результатам анализа.
* Стратегия очистки старых загруженных изображений из папки `photos/`.
* Логирование и мониторинг.
* Развертывание на производственном сервере (например, с использованием Gunicorn/Nginx).
